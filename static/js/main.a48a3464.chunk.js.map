{"version":3,"sources":["images/wknd-logo-dk.svg","images/icon-close.svg","images/icon-loading.svg","api/useGraphQL.js","components/Error.js","components/Loading.js","components/AEMText.js","components/Image.js","components/AdventureDetail.js","components/Adventures.js","components/AEMPage.js","components/Home.js","App.js","server/CustomModelClient.ts","index.js"],"names":["module","exports","process","REACT_APP_HOST_URI","REACT_APP_GRAPHQL_ENDPOINT","REACT_APP_AUTHORIZATION","getHttpHeaders","httpHeaders","Headers","append","btoa","useGraphQL","query","skipCall","useState","data","setData","errorMessage","setErrors","useEffect","window","fetch","method","headers","body","JSON","stringify","then","response","json","errors","map","error","message","join","mapErrors","catch","Error","className","this","props","Component","Loading","src","loadingIcon","alt","TextEditConfig","emptyLabel","isEmpty","TextV2IsEmptyFn","resourceType","AEMText","withMappable","TextV2","MapTo","Image","imageSource","_path","_authorUrl","adventurePathsQuery","Contributer","pictureReference","fullName","occupation","withRouter","location","adventurePath","setAdventurePath","adventures","pathArray","adventureList","items","item","pathname","substring","lastIndexOf","length","replace","forEach","path","indexOf","adventureData","adventureByPath","to","backIcon","adventureTitle","pagePath","itemPath","adventureActivity","adventureType","adventureTripLength","adventureGroupSize","adventureDifficulty","adventurePrice","adventurePrimaryImage","dangerouslySetInnerHTML","__html","adventureDescription","html","adventureItinerary","adventureContributor","AdventureItem","adventureName","split","allAdventuresQuery","filterQuery","activity","Adventures","setQuery","onClick","adventure","index","key","Page","Home","AEMPage","REACT_APP_AEM_PROJECT_ROOT","App","logo","PathUtils","toAEMPath","CustomModelClient","apiHost","authorization","_authorization","modelPath","err","Promise","reject","url","status","ModelClient","modelClient","ModelManager","initializeAsync","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a48a3464.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/wknd-logo-dk.36593320.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-close.f227c489.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-loading.200bc7ed.svg\";","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport {useState, useEffect} from 'react';\n\nconst { REACT_APP_HOST_URI, REACT_APP_GRAPHQL_ENDPOINT, REACT_APP_AUTHORIZATION } = process.env;\n\n/*\n    Custom React Hook to perform a GraphQL query\n    query paramter is a GraphQL query\n    environment variable REACT_APP_GRAPHQL_ENDPOINT is used to point to endpoint in AEM\n*/\nfunction useGraphQL(query, skipCall) {\n\n    let [data, setData] = useState(null);\n    let [errorMessage, setErrors] = useState(null);\n\n    useEffect(() => {\n        if(!skipCall) {\n            window.fetch(\n            REACT_APP_HOST_URI + REACT_APP_GRAPHQL_ENDPOINT,\n            {\n                method: 'POST',\n                headers: getHttpHeaders(),\n                body: JSON.stringify({query}),\n            }\n            ).then(response => response.json())\n            .then(({data, errors}) => {\n                //If there are errors in the response set the error message\n                if(errors) {\n                    setErrors(mapErrors(errors));\n                }\n                //Otherwise if data in the response set the data as the results\n                if(data) {\n                    setData(data);\n                }\n            })\n            .catch((error) => {\n                setErrors(error);\n            });\n        }\n    }, [query, skipCall]);\n\n    return {data, errorMessage}\n}\n\n/**\n * concatenate error messages into a single string.\n * @param {*} errors\n */\nfunction mapErrors(errors) {\n    return errors.map((error) => error.message).join(\",\");\n}\n\nfunction getHttpHeaders() {\n    // set headers and include authorization if authorization set\n    let httpHeaders = new Headers();\n    httpHeaders.append('Content-Type', 'application/json');\n    if(REACT_APP_AUTHORIZATION) {\n        httpHeaders.append('Authorization', 'Basic ' + btoa(REACT_APP_AUTHORIZATION))\n    }\n    return httpHeaders;\n}\n\nexport default useGraphQL\n","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React, {Component} from 'react';\n\nclass Error extends Component {\n\n    render() {\n        return (<div className=\"error\">\n              <span className=\"error-message\">{`Error: ${this.props.errorMessage}`}</span>\n          </div>);\n    }\n}\n\nexport default Error;","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React, {Component} from 'react';\nimport loadingIcon from '../images/icon-loading.svg';\n\nclass Loading extends Component {\n\n    render() {\n        return (<div className=\"loading\">\n              <img src={loadingIcon} alt=\"Loading...\" />\n          </div>);\n    }\n}\n\nexport default Loading;","import { withMappable, MapTo } from '@adobe/aem-react-editable-components';\nimport { TextV2, TextV2IsEmptyFn } from \"@adobe/aem-core-components-react-base\";\n\n/**\n * Default Edit configuration for the Text component that interact with the Core Text component and sub-types\n *\n * @type EditConfig\n */\nconst TextEditConfig = {\n  emptyLabel: 'Text',\n  isEmpty: TextV2IsEmptyFn,\n  resourceType: 'wknd-spa/components/text'\n};\n\nexport const AEMText = withMappable(TextV2, TextEditConfig);\n\nMapTo('wknd-spa/components/text')(TextV2, TextEditConfig);\n","\nimport React from 'react';\n\nconst { REACT_APP_AEM_ENVIRONMENT } = process.env;\n\nfunction Image(props) {\n\n    let imageSource = props._path;\n    if(REACT_APP_AEM_ENVIRONMENT === 'author' && props._authorUrl) {\n        imageSource = props._authorUrl;\n    } else if (REACT_APP_AEM_ENVIRONMENT === 'publish' && props._publishUrl) {\n        imageSource = props._publishUrl;\n    }\n\n    return (<img className={props.className} src={imageSource}\n    alt={props.alt} />);\n\n}\n\nexport default Image;","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React, { useState, useEffect } from 'react';\nimport { withRouter, Link} from \"react-router-dom\";\nimport useGraphQL from '../api/useGraphQL';\nimport backIcon from '../images/icon-close.svg';\nimport Error from './Error';\nimport Loading from './Loading';\nimport './AdventureDetail.scss';\nimport { AEMText } from './AEMText';\nimport Image from './Image';\n\nfunction AdventureDetail(props) {\n    const [adventurePath, setAdventurePath] = useState(props.location?.data);\n\n    // if path is unavailable, fetch all adventures list and retrieve detail path\n    const { data: adventures } = useGraphQL(adventurePathsQuery, adventurePath);\n\n    useEffect(() => {\n        if(adventures) {\n            const pathArray = adventures.adventureList?.items?.map((item) => item._path);\n            let pathname = window.location.pathname;\n            pathname = pathname.substring(pathname.lastIndexOf(\"/\") + 1, pathname.length);\n            pathname = pathname.replace(/(.html)/, '');\n            pathArray.forEach(path => path.indexOf(pathname) >= 0 && setAdventurePath(path));\n        }\n    }, [adventures]);\n\n    //parse the content fragment from the url\n    //Use a custom React Hook to execute the GraphQL query\n    // execute the query only when the path is available\n    const { data, errorMessage } = useGraphQL(adventureDetailQuery(adventurePath), !adventurePath);\n\n    //If there is an error with the GraphQL query\n    if(errorMessage) return <Error errorMessage={errorMessage} />;\n\n    //If data is null then return a loading icon...\n    if(!data) return <Loading />;\n\n    //Set adventureData variable based on graphQL response\n    let adventureData = data.adventureByPath.item;\n    let pathname = adventurePath.substring(adventurePath.lastIndexOf(\"/\") + 1, adventurePath.length);\n\n    return (\n        <div className=\"adventure-detail\">\n          <Link className=\"adventure-detail-close-button\" to={\"/home\"}>\n            <img className=\"Backbutton-icon\" src={backIcon} alt=\"Return\" />\n          </Link>\n          <h1 className=\"adventure-detail-title\">{adventureData.adventureTitle}</h1>\n          <AEMText\n            pagePath={`/content/wknd-spa/home/adventures/${pathname}`}\n            itemPath='text21' />\n          <div className=\"adventure-detail-info\">\n            <div className=\"adventure-detail-info-label\">Activity</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureActivity}</div>\n            <div className=\"adventure-detail-info-label\">Type</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureType}</div>\n            <div className=\"adventure-detail-info-label\">Trip Length</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureTripLength}</div>\n            <div className=\"adventure-detail-info-label\">Group Size</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureGroupSize}</div>\n            <div className=\"adventure-detail-info-label\">Difficulty</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureDifficulty}</div>\n            <div className=\"adventure-detail-info-label\">Price</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventurePrice}</div>\n          </div>\n          <div className=\"adventure-detail-content\">\n            <Image className=\"adventure-detail-primaryimage\" alt={adventureData.adventureTitle}\n                   {... adventureData.adventurePrimaryImage} />\n            <div dangerouslySetInnerHTML={{__html: adventureData.adventureDescription.html}}></div>\n            <h2>Itinerary</h2>\n            <hr />\n            <div className=\"adventure-detail-itinerary\"\n                 dangerouslySetInnerHTML={{__html: adventureData.adventureItinerary.html}}></div>\n            <Contributer {...adventureData.adventureContributor} />\n          </div>\n\n        </div>\n    );\n}\n\nfunction adventureDetailQuery(_path) {\n  return _path && `{\n    adventureByPath (_path: \"${_path}\") {\n      item {\n        _path\n          adventureTitle\n          adventureActivity\n          adventureType\n          adventurePrice\n          adventureTripLength\n          adventureGroupSize\n          adventureDifficulty\n          adventurePrice\n          adventurePrimaryImage {\n            ... on ImageRef {\n              _path\n              _authorUrl\n              _publishUrl\n              mimeType\n              width\n              height\n            }\n          }\n          adventureDescription {\n            html\n          }\n          adventureItinerary {\n            html\n          }\n      }\n    }\n  }\n  `;\n}\n\n/**\n * Query for all Adventures\n */\nconst adventurePathsQuery = `\n  {\n    adventureList {\n      items {\n        _path\n      }\n    }\n  }\n`;\n\nfunction Contributer(props) {\n\n  if(!props) {\n    return null;\n  }\n  let pictureReference = null;\n  if(props.pictureReference) {\n     pictureReference =  <img className=\"contributor-image\" src={props.pictureReference._path} alt={props.fullName} />\n  }\n\n  return (\n    <div className=\"contributor\">\n      <hr className=\"contributor-separator\" />\n      {pictureReference}\n      <h3 className=\"contributor-name\">{props.fullName}</h3>\n      <h4 className=\"contributor-occupation\">{props.occupation}</h4>\n    </div>);\n}\n\n\nexport default withRouter(AdventureDetail);\n","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React, { useState } from 'react';\nimport {Link} from 'react-router-dom';\nimport useGraphQL from '../api/useGraphQL';\nimport Error from './Error';\nimport Loading from './Loading';\nimport './Adventures.scss';\nimport Image from './Image';\n\n\nfunction Adventures() {\n\n    //Use React Hooks to set the initial GraphQL query to a variable named `query`\n    const [query, setQuery] = useState(allAdventuresQuery);\n    //Use a custom React Hook to execute the GraphQL query\n    const { data, errorMessage } = useGraphQL(query);\n\n    //If there is an error with the GraphQL query\n    if(errorMessage) return <Error errorMessage={errorMessage} />;\n\n    //If data is null then return a loading state...\n    if(!data) return <Loading />;\n\n    return (\n        <div className=\"adventures\">\n          <button onClick={() => setQuery(allAdventuresQuery)}>All</button>\n          <button onClick={() => setQuery(filterQuery('Camping'))}>Camping</button>\n          <button onClick={() => setQuery(filterQuery('Surfing'))}>Surfing</button>\n          <ul className=\"adventure-items\">\n            {\n                //Iterate over the returned data items from the query\n                data.adventureList.items.map((adventure, index) => {\n                    return (\n                        <AdventureItem key={index} {...adventure} />\n                    );\n                })\n            }\n            </ul>\n        </div>\n    );\n}\n\n// Render individual Adventure item\nfunction AdventureItem(props) {\n  const { _path: adventurePath } = props;\n\n  let adventureName = adventurePath.split(\"/\");\n  adventureName = adventureName[adventureName.length - 1];\n\n  return (\n        <li className=\"adventure-item\">\n          <Link to={{\n              pathname:`/adventures/${adventureName}`,\n              data: adventurePath\n          }}>\n            <Image className=\"adventure-item-image\" alt={props.adventureTitle}\n            {... props.adventurePrimaryImage} />\n\n            { /*\n            <img className=\"adventure-item-image\" src={props.adventurePrimaryImage._path}\n            alt={props.adventureTitle} />*/}\n          </Link>\n          <div className=\"adventure-item-length-price\">\n            <div className=\"adventure-item-length\">{props.adventureTripLength}</div>\n            <div className=\"adventure-item-price\">{props.adventurePrice}</div>\n          </div>\n          <div className=\"adventure-item-title\">{props.adventureTitle}</div>\n      </li>\n      );\n}\n\n/**\n * Query for all Adventures\n */\nconst allAdventuresQuery = `\n  {\n    adventureList {\n      items {\n        _path\n        adventureTitle\n        adventurePrice\n        adventureTripLength\n        adventurePrimaryImage {\n          ... on ImageRef {\n            _path\n            _authorUrl\n            _publishUrl\n            mimeType\n            width\n            height\n          }\n        }\n      }\n    }\n  }\n`;\n\n/**\n * Returns a query for Adventures filtered by activity\n */\nfunction filterQuery(activity) {\n  return `\n    {\n      adventureList (filter: {\n        adventureActivity: {\n          _expressions: [\n            {\n              value: \"${activity}\"\n            }\n          ]\n        }\n      }){\n        items {\n          _path\n        adventureTitle\n        adventurePrice\n        adventureTripLength\n        adventurePrimaryImage {\n          ... on ImageRef {\n            _path\n            _authorUrl\n            _publishUrl\n            mimeType\n            width\n            height\n          }\n        }\n      }\n    }\n  }\n  `;\n}\n\n\nexport default Adventures;\n","/*******************************************************************************\n *\n *    Copyright 2020 Adobe. All rights reserved.\n *    This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n *    you may not use this file except in compliance with the License. You may obtain a copy\n *    of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n *    Unless required by applicable law or agreed to in writing, software distributed under\n *    the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n *    OF ANY KIND, either express or implied. See the License for the specific language\n *    governing permissions and limitations under the License.\n *\n ******************************************************************************/\nimport {\n    Page,\n    withMappable\n} from '@adobe/aem-react-editable-components';\n\nexport default withMappable(Page);\n","import React from 'react';\n\nimport Adventures from './Adventures';\nimport AEMPage from './AEMPage';\n\n/***\n * Displays a grid of current adventures\n */\nfunction Home() {\n  return (\n    <div className=\"Home\">\n      <h2>Current Adventures</h2>\n      <AEMPage\n        pagePath='/content/wknd-spa/home' />\n      <Adventures />\n    </div>\n  );\n}\n\nexport default Home;\n","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport logo from './images/wknd-logo-dk.svg';\n\nimport { PathUtils } from '@adobe/aem-spa-page-model-manager';\n\nimport AdventureDetail from './components/AdventureDetail';\nimport Home from './components/Home';\n\nimport './App.scss';\n\nconst { REACT_APP_HOST_URI, REACT_APP_AEM_PROJECT_ROOT } = process.env;\n\nfunction App() {\n  // Transform routing path to accomodate for AEM specific paths\n  // path updated only when opened within AEM editor\n  const transformRoute = (path) => {\n    const aemPathRegex = PathUtils.toAEMPath(path, REACT_APP_HOST_URI, REACT_APP_AEM_PROJECT_ROOT);\n    return aemPathRegex;\n  };\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <header>\n          <img src={logo} className=\"logo\" alt=\"WKND Logo\"/>\n          <hr />\n        </header>\n      <Switch>\n        <Route path={transformRoute('/adventures/:path')}>\n          <AdventureDetail />\n        </Route>\n        <Route path=\"/\">\n          <Home />\n        </Route>\n      </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2018 Adobe Systems Incorporated\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { Model, ModelClient } from '@adobe/aem-spa-page-model-manager';\n\n/**\n * Custom ModelClient meant to demonstrate how to customize the request sent to the remote server\n */\nexport class CustomModelClient extends ModelClient {\n    private _authorization: string | null;\n    /**\n     * @constructor\n     * @private\n     * @param [apiHost] Http host of the API.\n     */\n    constructor(apiHost?: string, authorization?:string) {\n        super(apiHost);\n        this._authorization = authorization || null;\n    }\n\n    /**\n     * Returns http host of the API.\n     * @returns API host or `null`.\n     */\n    get authorization(): string  {\n        return this._authorization ? this._authorization : '';\n    }\n\n    /**\n     * Fetches a model using the given a resource path\n     *\n     * @param {string} modelPath - Path to the model\n     * @return {*}\n     */\n    fetch<M extends Model>(modelPath: string): Promise<M> {\n\n        if (!modelPath) {\n            let err = 'Fetching model rejected for path: ' + modelPath;\n            return Promise.reject(new Error(err));\n        }\n\n        // Either the API host has been provided or we make an absolute request relative to the current host\n        let url = `${this.apiHost}${modelPath}`;\n        \n        // set headers and include authorization if authorization set\n        let httpHeaders = new Headers();\n        httpHeaders.append('Content-Type', 'application/json');\n        if(this.authorization) {\n            httpHeaders.append('Authorization', 'Basic ' + btoa(this.authorization))\n        }\n        \n        return fetch(\n            url, {headers: httpHeaders }\n            ).then((response) => {\n                if ((response.status >= 200) && (response.status < 300)) {\n                    return response.json() as Promise<M>;\n                }\n    \n                throw { response };\n            }).catch((error) => {\n                return Promise.reject(error);\n            });\n    }\n}\n","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { ModelManager } from \"@adobe/aem-spa-page-model-manager\";\n\nimport { CustomModelClient } from './server/CustomModelClient';\n\nconst { REACT_APP_HOST_URI, REACT_APP_AUTHORIZATION } = process.env;\n\nconst modelClient = new CustomModelClient(REACT_APP_HOST_URI, REACT_APP_AUTHORIZATION);\nModelManager.initializeAsync({\n    modelClient\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}